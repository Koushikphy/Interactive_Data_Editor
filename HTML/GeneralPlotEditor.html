<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Interactive Data Editor</title>
<link href="../JsCSS/style.css" rel="stylesheet">
<link rel="stylesheet" href="../JsCSS/jquery-ui.min.css">
<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
<script src="../JsCSS/plotly-latest.min.js"></script>
<script src="../JsCSS/jquery.min.js"></script>
<script src="../JsCSS/jquery-ui.min.js"></script>

</head>
<body>



<div id="header">
        An interactive 2D and 3D data editor
</div>


<div class="borders" style="margin-top: 5px; width:100%" id="container">
        &nbsp;Data Column ⇒ &ensp;
        X :<select id="xCol" onchange="updateData();"></select>&ensp;
        Y :<select id="yCol" onchange="updateData();"></select>&ensp;
        Z :<select id="zCol" onchange="colChanged(this.selectedIndex)"></select> &ensp;   


<div id="drag">&nbsp;Drag the slider to change 'X' value:</div>
<div id="slider" style="background: #eaeaea">
  <div id="custom-handle" class="ui-slider-handle" style="background: #4CAF50; color:#ffffff"></div>
</div>
</div>

<div id="figurecontainer"></div>
<div id = "status"></div>
<script src="../JsCSS/functions.js"></script>
<script src="../JsCSS/plotSetup.js"></script>
<script>



  $( function() {
    var handle = $( "#custom-handle" );
    $( "#slider" ).slider({min:0,max:0,step:1,
      create: function() {
        handle.text( xName+': '+ $(this).slider( "value" ) );
      },
      slide: function( event, ui ) {
        th_in = ui.value;
        sliderChanged();
      }
    });
  });


    var col ={ x : 0, y:0, z:0};
    var fl = JSON.parse(localStorage.getItem("cols"));
    if (fl!==null){
        col = fl;
    }


resizePlot();



        function updateData() {
            col.x = xCol.selectedIndex;
            col.y = yCol.selectedIndex;
            col.z = zCol.selectedIndex;
            if (data.length!=1){ //3D
                th_in= 0;
                $( "#slider" ).slider({max:  data.length-1  })
                $( "#custom-handle" ).text(xName+': '+ data[0][col.x][0])
            } else {    //2D
                col.z = col.y;
                col.y = col.x;
                col.x = 0;
            };
            updatePlot(1);
            startDragBehavior();
            updateOnServer();
            if(!swapped) localStorage.setItem("cols",JSON.stringify(col));
        };


        function thisJobs() {
            if (data.length==1){

                serve =0;

            };
            var op = "";
            for (var i = 1; i <= data[0].length; i++) {
                op += '<option>' + i + '</option>';
            };
            var tmp = $("select");
            for (var i = 0; i < tmp.length; i++) {
                tmp[i].innerHTML = op;
            };
            xCol.selectedIndex=col.x;
            yCol.selectedIndex=col.y;
            zCol.selectedIndex=col.z;
            updateData();
        };
    </script>
</body>
</html>