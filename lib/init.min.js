const req=require("request"),{remote:remote,ipcRenderer:ipcRenderer,shell:shell}=require("electron"),{dialog:dialog,BrowserWindow:BrowserWindow,Menu:Menu,MenuItem:MenuItem,app:app}=remote;var recentLocation,recentFiles=[];function versionCheck(){var e;(e=(e=new Date).getDate()+""+e.getMonth())!=JSON.parse(localStorage.getItem("today"))&&(localStorage.setItem("today",JSON.stringify(e)),req({url:"https://api.github.com/repos/Koushikphy/Interactive-Data-Editor/releases/latest",headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1521.3 Safari/537.36});"}},function(e,e,t){var n=JSON.parse(t).name;if(console.log(n),"v2.6.0"!=n){var r=`A new version of the software ${n} is available.\n Do you wnat to downlod it now?`;dialog.showMessageBox({type:"question",title:"Update available!!!",message:r,buttons:["OK","Cancel"]})||shell.openExternal("https://koushikphy.github.io/ide/#download--installation")}}))}function replaceWithHome(e){var t=process.env.HOME||process.env.USERPROFILE;return e.includes(t)?e.replace(t,"~"):e}function recentMenu(){var e=menu.getMenuItemById("rf").submenu,t=menu.getMenuItemById("arf").submenu;recentFiles.length>10&&recentFiles.splice(0,1),e.clear(),t.clear();for(let o=recentFiles.length-1;o>=0;o--){var n=replaceWithHome(recentFiles[o].slice()),r={label:n,click(){ipcRenderer.send("rf",recentFiles[o])}},l={label:n,click(){ipcRenderer.send("adrf",recentFiles[o])}};e.append(new MenuItem(r)),t.append(new MenuItem(l))}localStorage.setItem("files",JSON.stringify(recentFiles))}if(app.isPackaged)if(versionCheck(),remote.process.argv.length>1)window.onload=function(){fileReader(remote.process.argv[1])};else{require("particles.js");window.particlesJS.load("particle","../lib/particles.json")}else document.getElementById("branding").remove(),document.getElementById("particle").remove(),document.getElementById("full").style.display="block",remote.process.argv.length>2&&(window.onload=function(){fileReader(remote.process.argv[2])});var fl,menu=Menu.getApplicationMenu();function closeThis(e){$(e).parent().slideUp(),resizePlot()}null!==(fl=JSON.parse(localStorage.getItem("files")))&&(recentFiles=fl,recentMenu()),null!==(fl=JSON.parse(localStorage.getItem("recent")))&&(recentLocation=fl);