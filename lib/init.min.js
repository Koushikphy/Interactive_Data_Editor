const req=require("request"),{remote:remote,ipcRenderer:ipcRenderer,shell:shell}=require("electron"),{dialog:dialog,BrowserWindow:BrowserWindow,Menu:Menu,MenuItem:MenuItem,app:app}=remote;var recentLocation,recentFiles=[];function versionCheck(){var e;(e=(e=new Date).getDate()+""+e.getMonth())!=JSON.parse(localStorage.getItem("today"))&&(localStorage.setItem("today",JSON.stringify(e)),req({url:"https://api.github.com/repos/Koushikphy/Interactive-Data-Editor/releases/latest",headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1521.3 Safari/537.36});"}},function(e,e,t){var r=JSON.parse(t).name;if(console.log(r),"v2.5.0"!=r){var n=`A new version of the software ${r} is available.\n Do you wnat to downlod it now?`;dialog.showMessageBox({type:"question",title:"Update available!!!",message:n,buttons:["OK","Cancel"]})||shell.openExternal("https://github.com/Koushikphy/Interactive-Data-Editor/releases")}}))}function replaceWithHome(e){var t=process.env.HOME||process.env.USERPROFILE;return e.includes(t)?e.replace(t,"~"):e}function recentMenu(){var e=menu.getMenuItemById("rf").submenu,t=menu.getMenuItemById("arf").submenu;recentFiles.length>10&&recentFiles.splice(0,1),e.clear(),t.clear();for(let a=recentFiles.length-1;a>=0;a--){var r=replaceWithHome(recentFiles[a].slice()),n={label:r,click(){ipcRenderer.send("rf",recentFiles[a])}},l={label:r,click(){ipcRenderer.send("adrf",recentFiles[a])}};e.append(new MenuItem(n)),t.append(new MenuItem(l))}localStorage.setItem("files",JSON.stringify(recentFiles))}if(app.isPackaged){require("particles.js");window.particlesJS.load("particle","../lib/particles.json"),versionCheck()}else document.getElementById("particle").remove(),document.getElementById("full").style.display="block";var fl,menu=Menu.getApplicationMenu();null!==(fl=JSON.parse(localStorage.getItem("files")))&&(recentFiles=fl,recentMenu()),null!==(fl=JSON.parse(localStorage.getItem("recent")))&&(recentLocation=fl);