var figurecontainer=document.getElementById("figurecontainer"),data=[],cols=[0,1,2],ldata=[],lIniData=[],ranges=[],swapped=!1;const{ipcRenderer:ipcRenderer}=require("electron"),Plotly=require("plotly.js-gl3d-dist");function transpose(e){return e[0].map((a,t)=>e.map(e=>e[t]))}function mark_clicked(e){e.checked?Plotly.restyle(figurecontainer,{mode:"markers+lines"}):Plotly.restyle(figurecontainer,{mode:"lines"})}function getRange(e,a,t){var n,r;if(e=e.split(",").map(e=>parseFloat(e)),a)[n,r]=a;else{var o=data[t].flat();r=Math.max(...o),n=Math.min(...o)}return isNaN(e[0])&&(e[0]=n),isNaN(e[1])&&(e[1]=r),cmin=Math.max(e[0],n),cmax=Math.min(e[1],r),[e,[cmin,cmax]]}function setXRange(e,a=!1){""!=e?([e,_]=getRange(e,a,cols[0]),Plotly.relayout(figurecontainer,{"scene.xaxis.range":e})):Plotly.relayout(figurecontainer,{"scene.xaxis.autorange":!0})}function setYRange(e,a=!1){""!=e?([e,_]=getRange(e,a,cols[1]),Plotly.relayout(figurecontainer,{"scene.yaxis.range":e})):Plotly.relayout(figurecontainer,{"scene.yaxis.autorange":!0})}function setZRange(e,a=!1){""!=e?([e,[cmin,cmax]]=getRange(e,a,cols[2]),Plotly.update(figurecontainer,{cmin:cmin,cmax:cmax},{"scene.zaxis.range":e})):Plotly.relayout(figurecontainer,{"scene.zaxis.autorange":!0})}function makeRotation(){var e=!0,a=data[0][0].length;for(let t of data[0])if(t.length!=a){e=!1;break}if(e)return xxx=transpose(data[0]),yyy=transpose(data[1]),void(zzz=transpose(data[2]));var t=[].concat(...data[0]).filter(e=>void 0!==e),n=[].concat(...data[1]).filter(e=>void 0!==e),r=[].concat(...data[2]).filter(e=>void 0!==e),o=[...new Set(n)].sort((e,a)=>e-a);xxx=[],yyy=[],zzz=[];for(let e of o){var i=[],s=[],c=[];for(let a=0;a<t.length;a++)n[a]==e&&(i.push(t[a]),s.push(n[a]),c.push(r[a]));xxx.push(i),yyy.push(s),zzz.push(c)}}function initData(e){for(var a=[],t=0;t<e;t++)a.push({type:"scatter3d",mode:"lines",x:[1,2],y:[1,2],z:[1,2],marker:{size:1.7,color:"#1f77b4"},line:{color:"#ff7f0e"},hoverinfo:"x+y+z",hoverlabel:{bgcolor:"#2ca02c"}});return a}ipcRenderer.on("sdata",function(e,a){[data,swapped]=a,updatePlot()});var sIniData=[{type:"surface",hoverinfo:"x+y+z",colorscale:"Portland",hoverlabel:{bgcolor:"#2ca02c"},z:[[1]],x:[[1]],y:[[1]]}],layout={height:window.innerHeight+68,width:window.innerWidth-17,margin:{t:0,r:50,b:0,l:25,pad:0},showlegend:!1,scene:{aspectmode:"cube",zaxis:{autorange:!0,spikesides:!1},yaxis:{spikesides:!1},xaxis:{spikesides:!1}}};