const electron=require("electron"),path=require("path"),url=require("url");var mainWindow;process.env.NODE_ENV="production";const{app:app,BrowserWindow:BrowserWindow,Menu:Menu,ipcMain:ipcMain,shell:shell}=electron;function isDev(){const isEnvSet="ELECTRON_IS_DEV"in process.env,getFromEnv=1===parseInt(process.env.ELECTRON_IS_DEV,10);return isEnvSet?getFromEnv:!app.isPackaged}ipcMain.on("back",function(e,d){mainWindow.webContents.send("back",d)}),ipcMain.on("rf",function(e,d){mainWindow.webContents.send("rf",d)}),ipcMain.on("checkClose",function(eg,d){mainWindow.destroy(),app.quit()}),app.on("ready",function(){(mainWindow=new BrowserWindow({show:!1,minWidth:1200,icon:path.join(__dirname,"charts.png"),webPreferences:{nodeIntegration:!0}})).maximize(),mainWindow.loadURL(url.format({pathname:path.join(__dirname,"HTML/all.html"),protocol:"file:",slashes:!0})),isDev()&&mainWindow.webContents.openDevTools(),mainWindow.on("close",function(e){e.preventDefault(),mainWindow.webContents.send("checkClose","isCloseAble")}),Menu.setApplicationMenu(homeMenu),mainWindow.show()});const homeMenuTemplate=[{label:"File",submenu:[{label:"Open file",accelerator:"CmdOrCtrl+O",click(){mainWindow.webContents.send("menuTrigger","open")}},{label:"Recent Files",id:"rf",submenu:[]},{label:"Open file for compare",enabled:!1,id:"openc",click(){mainWindow.webContents.send("menuTrigger","openc")}},{label:"Show compare data",id:"compf",type:"checkbox",checked:!0,visible:!1,click(){mainWindow.webContents.send("menuTrigger","compf")}},{type:"separator"},{label:"Save",enabled:!1,id:"save",accelerator:"CmdOrCtrl++S",click(){mainWindow.webContents.send("menuTrigger","save")}},{label:"Save As",enabled:!1,id:"saveas",accelerator:"CmdOrCtrl+Shift+S",click(){mainWindow.webContents.send("menuTrigger","saveas")}},{type:"separator"},{label:"3D plotter",click(){var childWindow=new BrowserWindow;childWindow.loadURL(url.format({pathname:path.join(__dirname,"HTML/Plotter.html"),protocol:"file:",slashes:!0})),childWindow.maximize(),childWindow.setMenu(null),isDev()&&childWindow.webContents.openDevTools()}},{label:"Go Home",accelerator:"CmdOrCtrl+H",click(){mainWindow.loadURL(url.format({pathname:path.join(__dirname,"index.html"),protocol:"file:",slashes:!0}));var homeMenu=Menu.buildFromTemplate(homeMenuTemplate);Menu.setApplicationMenu(homeMenu)}},{label:"Reload",accelerator:"CmdOrCtrl+R",click(){mainWindow.reload();for(let i of["save","saveas","wire","surf","spr","openc","pamh","pax"])Menu.getApplicationMenu().getMenuItemById(i).enabled=!1;Menu.getApplicationMenu().getMenuItemById("compf").visible=!1}},{type:"separator"},{label:"Quit",accelerator:"CmdOrCtrl+Q",click(){app.quit()}}]},{label:"Edit",submenu:[{label:"Points not movable horaizontally",enabled:!1,checked:!0,type:"checkbox",id:"pamh",click(){mainWindow.webContents.send("menuTrigger","pamh")}}]},{label:"Data",submenu:[{label:"Plot along X",id:"pax",visible:!0,click(){Menu.getApplicationMenu().getMenuItemById("pax").visible=!1,Menu.getApplicationMenu().getMenuItemById("pay").visible=!0,mainWindow.webContents.send("menuTrigger","pa")}},{label:"Plot along Y",id:"pay",visible:!1,click(){Menu.getApplicationMenu().getMenuItemById("pax").visible=!0,Menu.getApplicationMenu().getMenuItemById("pay").visible=!1,mainWindow.webContents.send("menuTrigger","pa")}},{label:"Open Swapper",enabled:!1,id:"swapen",click(){mainWindow.webContents.send("menuTrigger","swapen")}},{label:"Exit Swapper",id:"swapex",visible:!1,click(){mainWindow.webContents.send("menuTrigger","swapex")}},{label:"Fill Missing Values",enabled:!1,id:"fill",click(){mainWindow.webContents.send("menuTrigger","fill")}},{label:"Extend Data",id:"edat",enabled:"false",click(){mainWindow.webContents.send("menuTrigger","edat")}},{label:"Filter Data",id:"filter",enabled:!1,click(){mainWindow.webContents.send("menuTrigger","filter")}}]},{label:"Window",submenu:[{label:"3D Wireframe Plot",enabled:!1,id:"wire",click(){mainWindow.webContents.send("menuTrigger","wire")}},{label:"3D Surface Plot",enabled:!1,id:"surf",click(){mainWindow.webContents.send("menuTrigger","surface")}},{label:"Spreadsheet",enabled:!1,id:"spr",click(){mainWindow.webContents.send("menuTrigger","spread")}},{label:"Toggle Fullscreen",accelerator:"F11",click(){mainWindow.isFullScreen()?mainWindow.setFullScreen(!1):mainWindow.setFullScreen(!0),setTimeout(function(){mainWindow.webContents.send("menuTrigger","fullscreen")},100)}}]},{label:"Help",submenu:[{label:"Help",click(){var childWindow=new BrowserWindow({icon:path.join(__dirname,"charts.png"),webPreferences:{nodeIntegration:!0}});childWindow.loadURL(url.format({pathname:path.join(__dirname,"help.html"),protocol:"file:",slashes:!0})),childWindow.setMenuBarVisibility(!1)}},{label:"Sample Data",click(){var childWindow=new BrowserWindow;childWindow.loadURL(url.format({pathname:path.join(__dirname,"data.html"),protocol:"file:",slashes:!0})),childWindow.setMenuBarVisibility(!1)}},{label:"Homepage",click(){shell.openExternal("https://github.com/Koushikphy/Interactive-Data-Editor")}},{label:"About",click(){var childWindow=new BrowserWindow;childWindow.loadURL(url.format({pathname:path.join(__dirname,"about.html"),protocol:"file:",slashes:!0})),childWindow.setMenuBarVisibility(!1)}}]}];var homeMenu=Menu.buildFromTemplate(homeMenuTemplate);